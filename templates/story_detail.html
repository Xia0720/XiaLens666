{% extends "base.html" %}
{% block title %}Story Detail - XiaCapture{% endblock %}
{% block content %}
<div class="story-detail">
    <h1>Story Detail</h1>
    <p class="story-text">{{ story.text|safe }}</p>

    {% if story.images %}
        <div class="story-images">
            {% for img in story.images %}
                <a href="{{ img.image_url }}" target="_blank" rel="noopener noreferrer">
                    <img src="{{ img.image_url }}" alt="Story Image">
                </a>
            {% endfor %}
        </div>
    {% else %}
        <p>暂无图片</p>
    {% endif %}

    <div class="story-meta">
        <span class="created-at">{{ story.created_at.strftime('%Y-%m-%d %H:%M') if story.created_at else '' }}</span>
        {% if logged_in %}
            <div class="story-actions">
                <a href="{{ url_for('edit_story', story_id=story.id) }}" class="edit-btn">Edit</a>
                <form method="POST" action="{{ url_for('delete_story', story_id=story.id) }}" class="inline-delete" onsubmit="return confirm('Are you sure you want to delete this story?');">
                    <button type="submit" class="delete-btn">Delete</button>
                </form>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}

