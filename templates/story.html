<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Story</title>
</head>
<body>
  <h1>Stories</h1>

  <!-- 展示所有故事图文 -->
  {% for story in stories %}
    <div style="margin-bottom: 20px;">
      <img src="{{ story.image_url }}" alt="Story Image" style="max-width: 400px;" />
      <p>{{ story.caption }}</p>
    </div>
  {% endfor %}

  <!-- 登录用户显示上传表单 -->
  {% if logged_in %}
    <hr />
    <h2>Upload New Story</h2>
    <form method="POST" enctype="multipart/form-data">
      <input type="file" name="image" required />
      <br />
      <textarea name="caption" placeholder="Caption" required></textarea>
      <br />
      <button type="submit">Upload</button>
    </form>
    <p><a href="{{ url_for('logout') }}">Logout</a></p>
  {% else %}
    <p><a href="{{ url_for('login') }}">Login to upload stories</a></p>
  {% endif %}
</body>
</html>







