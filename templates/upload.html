{% extends "base.html" %}
{% block content %}
<h2>Upload Photos</h2>

<form method="POST" enctype="multipart/form-data">
    <div>
        <label for="albumSelect">选择相册</label><br>
        <select name="album" id="albumSelect" onchange="toggleNewAlbumInput()">
            {% for album in album_names %}
                {% if last_album %}
                    <option value="{{ album }}" {% if last_album == album %}selected{% endif %}>{{ album }}</option>
                {% else %}
                    <option value="{{ album }}">{{ album }}</option>
                {% endif %}
             {% endfor %}
             <option value="new" {% if last_album not in album_names %}selected{% endif %}>+ 创建新相册</option>
          </select>
    </div>

    <div id="newAlbumDiv" style="display:none; margin-top:10px;">
        <label for="new_album">新相册名</label><br>
        <input type="text" name="new_album" placeholder="输入新相册名">
    </div>

    <div style="margin-top:15px;">
        <label for="photo">选择照片</label><br>
        <input type="file" name="photo" id="photo" multiple required>
    </div>

    <button type="submit" style="margin-top:15px;">上传</button>
</form>

<script>
function toggleNewAlbumInput() {
    var select = document.getElementById('albumSelect');
    var newAlbumDiv = document.getElementById('newAlbumDiv');
    if (select.value === 'new') {
        newAlbumDiv.style.display = 'block';
    } else {
        newAlbumDiv.style.display = 'none';
    }
}
</script>
{% endblock %}
